# easy-ftp
ftp协议的学习源码，在这里用c/c++实现了一个简易的控制台ftp客户端，自学c/c++的过程中也遇到了不少的困难，通过百度或者书籍已经解决了问题，并实现了FTP客户端与服务器的基本交互，非常有意义的一次学习历程，希望可以帮助到需要的朋友。  

## FTP协议简介
FTP（File Transfer Protocol，文件传输协议） 是 TCP/IP 协议组中的协议之一。FTP协议包括两个组成部分，其一为FTP服务器，其二为FTP客户端。其中FTP服务器用来存储文件，用户可以使用FTP客户端通过FTP协议访问位于FTP服务器上的资源。在开发网站的时候，通常利用FTP协议把网页或程序传到Web服务器上。此外，由于FTP传输效率非常高，在网络上传输大的文件时，一般也采用该协议。  
默认情况下FTP协议使用TCP端口中的 20和21这两个端口，其中20用于传输数据，21用于传输控制信息。但是，是否使用20作为传输数据的端口与FTP使用的传输模式有关，如果采用主动模式，那么数据传输端口就是20；如果采用被动模式，则具体最终使用哪个端口要服务器端和客户端协商决定。  

## FTP命令
FTP 控制帧即远程交换信息，包含控制命令和选项。大多数 FTP 控制帧是简单的ASCII文本，用户通过用户PI向服务器PI发出FTP命令，服务器PI执行用户PI的FTP命令，并将执行的结果返回给用户。常用的FTP命令如下所示：  

命令 				描述   
ABOR				中断数据连接程序  
ACCT <account>		系统特权帐号  
ALLO <bytes> 		为服务器上的文件存储器分配字节  
APPE <filename>		添加文件到服务器同名文件  
CDUP <dir path>		改变服务器上的父目录  
CWD <dir path>		改变服务器上的工作目录  
DELE <filename>		删除服务器上的指定文件  
HELP <command>		返回指定命令信息  
LIST <name>			如果是文件名列出文件信息，如果是目录则列出文件列表  
MODE <mode>			传输模式（S=流模式，B=块模式，C=压缩模式）  
MKD <directory>		在服务器上建立指定目录  
NLST <directory>	列出指定目录内容  
NOOP				无动作，除了来自服务器上的承认  
PASS <password>		系统登录密码  
PASV				请求服务器等待数据连接  
PORT <address>		IP 地址和两字节的端口 ID  
PWD					显示当前工作目录  
QUIT				从 FTP 服务器上退出登录  
REIN				重新初始化登录状态连接  
REST <offset>		由特定偏移量重启文件传递  
RETR <filename>		从服务器上找回（复制）文件  
RMD <directory>		在服务器上删除指定目录  
RNFR <old path>		对旧路径重命名  
RNTO <new path>		对新路径重命名  
SITE <params>		由服务器提供的站点特殊参数  
SMNT <pathname>		挂载指定文件结构  
STAT <directory>	在当前程序或目录上返回信息  
STOR <filename>		储存（复制）文件到服务器上  
STOU <filename>		储存文件到服务器名称上  
STRU <type>			数据结构（F=文件，R=记录，P=页面）  
SYST				返回服务器使用的操作系统  
TYPE <data type>	数据类型（A=ASCII，E=EBCDIC，I=binary）  
USER <username>>	系统登录的用户名

## 状态码
110重新启动标记答复。  
120服务已就绪，在nnn分钟后开始。  
125数据连接已打开，正在开始传输。  
150文件状态正常，准备打开数据连接。  
2xx-肯定的完成答复一项操作已经成功完成。客户端可以执行新命令。  
200命令确定。  
202未执行命令，站点上的命令过多。  
211系统状态，或系统帮助答复。  
212目录状态。  
213文件状态。  
214帮助消息。  
215NAME系统类型，其中，NAME是AssignedNumbers文档中所列的正式系统名称。  
220服务就绪，可以执行新用户的请求。  
221服务关闭控制连接。如果适当，请注销。  
225数据连接打开，没有进行中的传输。  
226关闭数据连接。请求的文件操作已成功（例如，传输文件或放弃文件）。  
227进入被动模式(h1,h2,h3,h4,p1,p2)。  
230用户已登录，继续进行。  
250请求的文件操作正确，已完成。  
257已创建“PATHNAME”。  
3xx-肯定的中间答复该命令已成功，但服务器需要更多来自客户端的信息以完成对请求的处理。  
331用户名正确，需要密码。  
332需要登录帐户。  
350请求的文件操作正在等待进一步的信息。  
4xx-瞬态否定的完成答复该命令不成功，但错误是暂时的。如果客户端重试命令，可能会执行成功。  
421服务不可用，正在关闭控制连接。如果服务确定它必须关闭，将向任何命令发送这一应答。  
425无法打开数据连接。 426Connectionclosed;transferaborted.  
450未执行请求的文件操作。文件不可用（例如，文件繁忙）。  
451请求的操作异常终止：正在处理本地错误。  
452未执行请求的操作。系统存储空间不够。  
5xx-永久性否定的完成答复该命令不成功，错误是永久性的。如果客户端重试命令，将再次出现同样的错误。  
500语法错误，命令无法识别。这可能包括诸如命令行太长之类的错误。  
501在参数中有语法错误。  
502未执行命令。  
503错误的命令序列。  
504未执行该参数的命令。  
530未登录。  
532存储文件需要帐户。  
550未执行请求的操作。文件不可用（例如，未找到文件，没有访问权限）。  
551请求的操作异常终止：未知的页面类型。  
552请求的文件操作异常终止：超出存储分配（对于当前目录或数据集）。  
553未执行请求的操作。不允许的文件名。  

## 学习说明
开发平台：windows 7   
开发工具：QtCreator  

具体的实现请参照源码进行探索。  

